<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Timepicker examples</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="timepicker.css">
  <script src="timepicker.js"></script>
</head>
<body>
  <main class="container">
    <div class="row">
      <section id="example-12" class="col-md-3">
        <header class="page-header">
          <h2>12H Notation</h2>
        </header>

        <div class="form-group">
          <div class="input-group">
            <input type="text" class="form-control">
            <div class="input-group-btn">
              <button type="button" class="btn btn-default toggle">
                12H -> 24H
              </button>
            </div>
          </div>
        </div>

        <div class="container-12 form-group"></div>

        <script>
          document.addEventListener("DOMContentLoaded", function () {
            var demo = document.getElementById("example-12");
            var input = demo.querySelector("input");
            var selected = new Date();
            var format = 12;

            var timepicker = new Timepicker({
              container: demo.querySelector(".container-12"),
              onChange: function (time) {
                selected = time;
                input.value = formatTime(time, format);
              }
            });

            var toggle = demo.querySelector(".toggle");
            toggle.addEventListener("click", function () {
              if (format === 12) {
                format = 24;
                this.innerHTML = "24H -> 12H";
              } else {
                format = 12;
                this.innerHTML = "12H -> 24H";
              }
              input.value = input.value = formatTime(selected, format);
            });
          });
        </script>
      </section>

      <section id="example-24" class="col-md-3">
        <header class="page-header">
          <h2>24H Notation</h2>
        </header>

        <div class="form-group">
          <div class="input-group">
            <input type="text" class="form-control">
            <div class="input-group-btn">
              <button type="button" class="btn btn-default toggle">
                24H -> 12H
              </button>
            </div>
          </div>
        </div>

        <div class="container-24 form-group"></div>

        <script>
          document.addEventListener("DOMContentLoaded", function () {
            var demo = document.getElementById("example-24");
            var input = demo.querySelector("input");
            var selected = new Date();
            var format = 24;

            var timepicker = new Timepicker({
              container: demo.querySelector(".container-24"),
              clock: 24,
              onChange: function (time) {
                selected = time;
                input.value = input.value = formatTime(time, format);
              }
            });

            var toggle = demo.querySelector(".toggle");
            toggle.addEventListener("click", function () {
              if (format === 12) {
                format = 24;
                this.innerHTML = "24H -> 12H";
              } else {
                format = 12;
                this.innerHTML = "12H -> 24H";
              }
              input.value = input.value = formatTime(selected, format);
            });
          });
        </script>
      </section>
    </div>
  </main>

  <script>
    function formatTime (time, format) {
      var hour = time.getHours();
      var minute = ("0" + time.getMinutes()).slice(-2);
      var period = (hour >= 12) ? "PM" : "AM";

      if (format === 12) {
        hour = (hour > 12 || hour === 0) ? Math.abs(hour - 12) : hour;
        return hour + ":" + minute + " " + period;
      } else {
        hour = ("0" + time.getHours()).slice(-2);
        return hour + ":" + minute;
      }

      return false;
    }
  </script>
</body>
</html>
